### HTTP와 HTTPS의 차이점에 대해 설명해주세요

2022/08/19

## 1. HTTP?

- **서버와 클라이언트의 브라우저 사이에 데이터를 전송**하기 위한 통신 프로토콜이다.
- HTTP 서버는 기본 포트인 80번 포트에서 서비스를 대기하다,클라이언트의 브라우저와 TCP 통신으로 80번 포트와 연결되면, 서버는 클라이언트의 request에 자료를 response로 전송한다. 하지만, 단순히 정보를 주고받기 때문에 통신 과정에서 인터셉트가 일어나 데이터가 유출될 수 있다.

## 2. HTTPS?

- HTTPS는 HTTP에 **데이터 암호화가 추가**된 프로토콜이다.
- HTTPS는 HTTP와 다르게 **443번 포트**를 사용한다.
- HTTPS 프로토콜은 **SSL(보안 소켓 계층) 인증서**를 사용해서 서버와 브라우저 사이에 안전하게 암호화된 연결을 만들 수 있게 돕고, 민감한 데이터를 주고받을 때 이것이 도난당하는 것을 막아준다.

### SSL인증서를 사용한 HTTPS의 대칭키 암호화 동작 과정

- HTTPS 통신을 하기 위해선 서버가 비대칭키를 발급받아야 한다.
- 서버는 클라이언트와 세션키를 공유하기 위한 공개키를 생성해야 하는데, 일반적으로는 인증된 기관(Certificate Authority)에 공개키를 전송하여 인증서를 발급받는다.

### 인증서?

- 서버가 신뢰할 수 있는 진짜 서버임을 확인하기 위해 사용되는 것이다.
- 서비스 정보(인증서를 발급한 CA, 서비스의 도메인 등), **서버 측 공개키**(공개키, 공개키 암호화 방법), 지문, 디지털 서명 등의 정보를 저장한다.

### Certificate Authority?

- 인증서를 발급해주는 기관으로 **자체적으로 공개키와 비밀키를 가지고 있다**.

이제 자세한 인증서 발급 과정을 알아보자.

![image](https://user-images.githubusercontent.com/76507701/185563770-f195d411-6acf-4d8b-ab91-d0d7c484b3a1.png)

1. 발급 받고자 하는 기관은 자신의 사이트 정보(도메인 등)과 공개키를 CA에게 제출한다.

2. 그러면 CA는 검증을 걸친 후 **발급 받고자 하는 기관의 공개 키를 해시(SHA-256 등)** 한다. 이렇게 해시한 값을 **Finger Print(지문)**이라고 한다.

3. 이제 이 지문을 **CA의 비밀키로 암호화** 하고, 인증서의 발급자 서명으로 등록한다. 이렇게 서명된 것을 **디지털 서명 (Digital Signing)**이라고 한다.

인증서가 발급됐다면, 본격적인 HTTPS통신을 시작한다.

![image](https://user-images.githubusercontent.com/76507701/185569270-f2002ce3-54b0-458e-a8e4-6f7a96b96cc5.png)

1. 클라이언트가 서버에 접근하려고 하면, **서버는 CA에서 발급 받은 자신의 인증서를 클라이언트에게 전달**한다.

2. 그 후, 클라이언트는 서버로부터 받은 인증서가 믿을만한지 즉, 해당 인증서가 **CA로부터 인증받은 기관의 인증서인지 확인**한다.

3. CA리스트를 확인하여 믿을만하다고 판단되면, CA 기관의 공개키로 서버로부터 받은 인증서의 디지털 서명을 복호화하여 위조가 되지 않았음을 확인한 뒤, **서버의 공개키를 알아낸다.** (자세한 과정은 참고 블로그에 잘 나와있다. 꼭 확인하자.)

4. 클라이언트는 **복호화한 서버의 공개키로 대칭키를 암호화** 하여 서버에게 보낸다.

5. 서버는 **자신의 비밀키**로 클라이언트로부터 받은 암호화된 대칭키를 **복호화 하여 클라이언트의 대칭키를 알아낸다.**

## 참고 사이트

https://babbab2.tistory.com/5
